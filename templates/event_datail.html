{% extends "base.html" %}
{% block title %}Event Detail{% endblock %}
{% block content %}
<div class="container">
	<h1>{{ event.title }}</h1>
	<p><strong>Date:</strong> {{ event.date }} <strong>Time:</strong> {{ event.time }}</p>
	<p><strong>Location:</strong> {{ event.location }}</p>
	<div>
		<h3>Description</h3>
		<p>{{ event.description }}</p>
	</div>

	{% if session.get('user_id') %}
		{% if session.get('role') == 'student' %}
			<form method="post" action="{{ url_for('registration.register', event_id=event.id) }}">
				<button class="btn primary" type="submit">Register</button>
			</form>
		{% endif %}
		{% if session.get('role') == 'organizer' and session.get('user_id') == event.organizer_id %}
			<p>
				<a href="{{ url_for('events.edit_event_view', event_id=event.id) }}">Edit</a> |
				<form style="display:inline" method="post" action="{{ url_for('events.delete_event_view', event_id=event.id) }}">
					<button class="btn danger" type="submit">Delete</button>
				</form>
			</p>
		{% endif %}
	{% endif %}

		<p>
			{% if session.get('role') == 'student' %}
				<a href="{{ url_for('feedback.feedback', event_id=event.id) }}">Leave Feedback</a>
			{% else %}
				<a href="{{ url_for('feedback.feedback', event_id=event.id) }}">View Feedback</a>
			{% endif %}
		</p>
</div>
{% endblock %}
